<app-toolbar></app-toolbar>

<ion-content [fullscreen]="true">
  <ion-fab slot="fixed" horizontal="end" vertical="bottom">
    <ion-button color="dark" href="/favorites">
      <ion-icon slot="end" name="heart"></ion-icon>
      Meus favoritos
    </ion-button>
  </ion-fab>

  <div class="container">
    <ion-card style="width: 100%" class="ion-padding">
      <ion-fab class="ion-margin" horizontal="end">
        <ion-fab-button (click)="redirectToPokemonDetails()" size="small">
          <ion-icon name="eye" size="small"></ion-icon>
        </ion-fab-button>
        <app-fav-button [id]="currentPokemon()?.id"></app-fav-button>
      </ion-fab>

      <img [src]="currentPokemon()?.imageUrl" style="min-width: 256px" />

      <ion-card-header>
        <ion-card-title class="ion-text-capitalize">
          {{ currentPokemon()?.name }}
        </ion-card-title>
        <ion-card-subtitle> Nº {{ currentPokemon()?.id }} </ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>
          <span>Tipos: </span>
          @for (
            type of currentPokemon()?.types;
            track type.slot;
            let last = $last
          ) {
            <span>{{ type.name + (!last ? ' | ' : '') }}</span>
          }
        </p>
      </ion-card-content>
    </ion-card>
  </div>

  <div>
    <h1 class="ion-margin-start">Lista de Pokemons</h1>
    <ion-grid>
      <ion-row>
        @for (pokemon of pokemonList(); track pokemon.name) {
          <ion-col size="12" size-sm="3">
            <ion-card>
              <ion-fab class="ion-margin" horizontal="end">
                <ion-fab-button
                  (click)="redirectToPokemonDetails(pokemon.name)"
                  size="small"
                >
                  <ion-icon name="eye" size="small"></ion-icon>
                </ion-fab-button>
                <app-fav-button [id]="pokemon.id"></app-fav-button>
              </ion-fab>
              <div class="card-list-image">
                <img
                  [src]="pokemon?.imageUrl"
                  style="min-width: 128px; margin: 0px auto"
                />
              </div>
              <ion-card-content>
                <ion-card-title>{{ pokemon.name }}</ion-card-title>
                <ion-card-subtitle>Nº {{ pokemon?.id }}</ion-card-subtitle>
              </ion-card-content>
            </ion-card>
          </ion-col>
        }
      </ion-row>
      <ion-infinite-scroll (ionInfinite)="getNextPage($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
      </ion-infinite-scroll>
    </ion-grid>
  </div>
</ion-content>
